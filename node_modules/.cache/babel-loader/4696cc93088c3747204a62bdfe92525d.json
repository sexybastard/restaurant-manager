{"ast":null,"code":"import _classCallCheck from \"D:\\\\Learning Materials\\\\glints-test-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Learning Materials\\\\glints-test-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Learning Materials\\\\glints-test-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Learning Materials\\\\glints-test-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Learning Materials\\\\glints-test-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\Learning Materials\\\\glints-test-app\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Home from './Home.js';\nimport Login from './Login.js';\n\nvar firebase = require(\"firebase\"); // Required for side-effects\n\n\nrequire(\"firebase/firestore\");\n\nfirebase.initializeApp({\n  apiKey: \"AIzaSyB9G_v0FY2aFN3VzG9J10TI_wtSc-hEFBg\",\n  authDomain: \"interview-test-ec9c0.firebaseapp.com\",\n  databaseURL: \"https://interview-test-ec9c0.firebaseio.com\",\n  projectId: \"interview-test-ec9c0\",\n  storageBucket: \"interview-test-ec9c0.appspot.com\",\n  messagingSenderId: \"493975126354\"\n}); // Initialize Cloud Firestore through Firebase\n\nvar db = firebase.firestore(); // Disable deprecated features\n\ndb.settings({\n  timestampsInSnapshots: true\n});\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.handleLogin = function (email) {\n      var userRef = db.collection('users').doc(email);\n      userRef.get().then(function (doc) {\n        if (!doc.exists) {\n          userRef.doc(email).set({\n            email: email\n          }).then(function (ref) {\n            _this.setState({\n              loggedIn: true\n            }, function () {\n              return alert(email);\n            });\n          });\n        } else {\n          _this.setState({\n            loggedIn: true\n          }, function () {\n            return alert(email);\n          });\n        }\n      }); // userRef.doc(email).set(newItem).then(ref => {\n      //   this.setState({loggedIn: true}, () => alert(email))\n      // });\n    };\n\n    _this.state = {\n      loggedIn: false\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, this.state.loggedIn ? React.createElement(Home, {\n        db: db,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }) : React.createElement(Login, {\n        db: db,\n        handleLogin: this.handleLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["D:\\Learning Materials\\glints-test-app\\src\\App.js"],"names":["React","Component","Home","Login","firebase","require","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","db","firestore","settings","timestampsInSnapshots","App","props","handleLogin","email","userRef","collection","doc","get","then","exists","set","ref","setState","loggedIn","alert","state"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,WAAP;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,KAAP,MAAkB,YAAlB;;AACA,IAAMC,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB,C,CACA;;;AACAA,OAAO,CAAC,oBAAD,CAAP;;AAEAD,QAAQ,CAACE,aAAT,CAAuB;AACrBC,EAAAA,MAAM,EAAE,yCADa;AAErBC,EAAAA,UAAU,EAAE,sCAFS;AAGrBC,EAAAA,WAAW,EAAE,6CAHQ;AAIrBC,EAAAA,SAAS,EAAE,sBAJU;AAKrBC,EAAAA,aAAa,EAAE,kCALM;AAMrBC,EAAAA,iBAAiB,EAAE;AANE,CAAvB,E,CASA;;AACA,IAAIC,EAAE,GAAGT,QAAQ,CAACU,SAAT,EAAT,C,CAEA;;AACAD,EAAE,CAACE,QAAH,CAAY;AACVC,EAAAA,qBAAqB,EAAE;AADb,CAAZ;;IAIMC,G;;;;;AACJ,eAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,6EAAMA,KAAN;;AADiB,UAQnBC,WARmB,GAQL,UAACC,KAAD,EAAW;AACvB,UAAIC,OAAO,GAAGR,EAAE,CAACS,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BH,KAA3B,CAAd;AACAC,MAAAA,OAAO,CAACG,GAAR,GAAcC,IAAd,CAAmB,UAAAF,GAAG,EAAI;AACxB,YAAG,CAACA,GAAG,CAACG,MAAR,EAAe;AACbL,UAAAA,OAAO,CAACE,GAAR,CAAYH,KAAZ,EAAmBO,GAAnB,CAAuB;AAACP,YAAAA,KAAK,EAALA;AAAD,WAAvB,EAAgCK,IAAhC,CAAqC,UAAAG,GAAG,EAAI;AAC1C,kBAAKC,QAAL,CAAc;AAACC,cAAAA,QAAQ,EAAE;AAAX,aAAd,EAAgC;AAAA,qBAAMC,KAAK,CAACX,KAAD,CAAX;AAAA,aAAhC;AACD,WAFD;AAGD,SAJD,MAKI;AACF,gBAAKS,QAAL,CAAc;AAACC,YAAAA,QAAQ,EAAE;AAAX,WAAd,EAAgC;AAAA,mBAAMC,KAAK,CAACX,KAAD,CAAX;AAAA,WAAhC;AACD;AACF,OATD,EAFuB,CAYvB;AACA;AACA;AAED,KAxBkB;;AAGjB,UAAKY,KAAL,GAAa;AACXF,MAAAA,QAAQ,EAAE;AADC,KAAb;AAHiB;AAMlB;;;;6BAoBQ;AACP,aACE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI,KAAKE,KAAL,CAAWF,QAAX,GAAsB,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAEjB,EAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAtB,GAAyC,oBAAC,KAAD;AAAO,QAAA,EAAE,EAAEA,EAAX;AAAe,QAAA,WAAW,EAAE,KAAKM,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAF7C,CADF;AAOD;;;;EAnCelB,S;;AAsClB,eAAegB,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport Home from './Home.js';\nimport Login from './Login.js';\nconst firebase = require(\"firebase\");\n// Required for side-effects\nrequire(\"firebase/firestore\");\n\nfirebase.initializeApp({\n  apiKey: \"AIzaSyB9G_v0FY2aFN3VzG9J10TI_wtSc-hEFBg\",\n  authDomain: \"interview-test-ec9c0.firebaseapp.com\",\n  databaseURL: \"https://interview-test-ec9c0.firebaseio.com\",\n  projectId: \"interview-test-ec9c0\",\n  storageBucket: \"interview-test-ec9c0.appspot.com\",\n  messagingSenderId: \"493975126354\"\n});\n\n// Initialize Cloud Firestore through Firebase\nvar db = firebase.firestore();\n\n// Disable deprecated features\ndb.settings({\n  timestampsInSnapshots: true\n});\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n  \n    this.state = {\n      loggedIn: false\n    };\n  }\n\n  handleLogin = (email) => {\n    let userRef = db.collection('users').doc(email);\n    userRef.get().then(doc => {\n      if(!doc.exists){\n        userRef.doc(email).set({email}).then(ref => {\n          this.setState({loggedIn: true}, () => alert(email))\n        });\n      }\n      else{\n        this.setState({loggedIn: true}, () => alert(email))\n      }\n    })\n    // userRef.doc(email).set(newItem).then(ref => {\n    //   this.setState({loggedIn: true}, () => alert(email))\n    // });\n\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        {\n          this.state.loggedIn ? <Home db={db} /> : <Login db={db} handleLogin={this.handleLogin} />\n        }\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}